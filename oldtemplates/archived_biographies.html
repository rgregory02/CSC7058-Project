<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Archived Biographies ‚Äì Person</title>
  <link rel="stylesheet" href="/static/styles.css">
  <link rel="icon" href="/static/favicon.ico" type="image/x-icon" />
  <style>
    .container { max-width: 900px; margin: 0 auto; padding: 2rem; }
    h1 { margin-bottom: 1rem; }
    ul.archived-list { list-style: none; padding: 0; }
    ul.archived-list li {
      margin-bottom: 0.8rem;
      padding: 0.6rem 1rem;
      background: #f3f3f3;
      border: 1px solid #ccc;
      border-radius: 6px;
    }
    .archived-actions a {
      margin-right: 10px;
      text-decoration: none;
      color: #007bff;
    }
    .archived-actions a:hover { text-decoration: underline; }
    .created-time.loading {
      color: #888;
      font-style: italic;
    }
    .btn-secondary {
      background-color: #555;
      color: white;
      padding: 10px 16px;
      text-decoration: none;
      border-radius: 6px;
      display: inline-block;
      margin-top: 1.5rem;
    }
    .btn-secondary:hover {
      background-color: #444;
    }
  </style>
  <script>
    document.addEventListener('DOMContentLoaded', function () {
      const items = document.querySelectorAll('.archived-item');
      items.forEach(item => {
        const utc = item.getAttribute('data-utc');
        const tag = item.querySelector('.created-time');
        if (utc && tag) {
          const dt = new Date(utc);
          if (!isNaN(dt)) {
            const localStr = dt.toLocaleString(undefined, {
              year: "numeric", month: "short", day: "numeric",
              hour: "2-digit", minute: "2-digit"
            });
            tag.textContent = `Created: ${localStr}`;
          } else {
            tag.textContent = `Created: Unknown`;
          }
          tag.classList.remove("loading");
        }
      });
    });
  </script>
</head>
<body>
  <div class="container">
    <h1>üìÅ Archived Person Biographies</h1>

    {% if archived_people %}
      <ul class="archived-list">
        {% for person_id, name, created in archived_people %}
          <li class="archived-item" data-name="{{ name or '[Unnamed Person]' }}"{% if created %} data-utc="{{ created }}"{% endif %}>
            <strong>{{ name or "[Unnamed Person]" }}</strong><br>
            <small class="created-time loading">Created: Unknown</small><br>
            <div class="archived-actions">
              <a href="/person_view_archived/{{ person_id }}" aria-label="View biography for {{ name }}">üëÅ View</a>
              <a href="/restore_person/{{ person_id }}" onclick="return confirm('Restore this biography?')" aria-label="Restore biography for {{ name }}">‚ôªÔ∏è Restore</a>
            </div>
          </li>
        {% endfor %}
      </ul>
    {% else %}
      <p><em>No archived biographies found.</em></p>
    {% endif %}

    <a href="/" class="btn-secondary">‚Üê Back to Home</a>
  </div>
</body>
</html>
